<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Cooperative Recreational Sampling Program</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Standard-Operating-Procedures_files/libs/clipboard/clipboard.min.js"></script>
<script src="Standard-Operating-Procedures_files/libs/quarto-html/quarto.js"></script>
<script src="Standard-Operating-Procedures_files/libs/quarto-html/popper.min.js"></script>
<script src="Standard-Operating-Procedures_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Standard-Operating-Procedures_files/libs/quarto-html/anchor.min.js"></script>
<link href="Standard-Operating-Procedures_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Standard-Operating-Procedures_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Standard-Operating-Procedures_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Standard-Operating-Procedures_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Standard-Operating-Procedures_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cooperative Recreational Sampling Program</h1>
<p class="subtitle lead">Standard Operating Procedures</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="contact-information" class="level2">
<h2 class="anchored" data-anchor-id="contact-information">Contact Information:</h2>
<p><strong>Melissa Monk</strong>, <em>NOAA Southwest Fisheries Science Center (SWFSC)</em>, <strong>email:</strong> &lt;melissa.monk@noaa.gov&gt;</p>
<p><strong>Kenneth Franke</strong>, <em>Sportfishing Association of California (SAC),</em> <strong>email:</strong> &lt;kennethfrankesac@gmail.com&gt;</p>
<p><strong>Rachel Brooks</strong>, <em>NOAA Southwest Fisheries Science Center (SWFSC)</em>, <strong>email:</strong> &lt;rachel.brooks@noaa.gov&gt;</p>
<p><strong>Merit McCrea</strong>, <em>Sportfishing Association of California (SAC),</em> <strong>email:</strong> &lt;meritmmcrea@hotmail.com&gt;</p>
<p><strong>Edwin Reyes</strong>,<em>Sportfishing Association of California (SAC),</em> <strong>email:</strong> &lt;edwin@sportfishca.org&gt;</p>
</section>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background:</h2>
<p>The 2018 Marine Life Management Act Master Plan for fisheries specifically recommends prioritizing additional environmental and fisheries monitoring to increase climate resiliency. Biological sampling of targeted fishes is critical to understanding the effects of environmental change and the corresponding impacts on managed fisheries, and can provide the baseline data needed to manage a fishery for increased ecological resilience. In addition to increasing climate-resiliency, monitoring and sampling life-history characteristics of targeted species is necessary for adaptive management, where knowing how specific age/size classes within a fishery are being impacted is the first step in developing management strategies that guard against over-exploitation.&nbsp;</p>
<p>While CDFW currently surveys the landings and length distributions of rockfishes encountered by the recreational fishing fleet as part of the California Recreational Fisheries Survey (CRFS); CRFS does not currently collect otoliths (for age and growth), fin clips (for genetic analyses), or any other biological information only available from examining the internal organs of a fish (i.e., sex, maturity status, fecundity, condition). This lack of sampling means that many management decisions are currently being made with incomplete or insufficient data, leading to uncertainty in the assessments and questioning of the process/outcomes by stakeholders.&nbsp;</p>
<p>Additionally, the lack of sampling leads to a critical lack of information about the spatial scale of how targeted species are reacting to both fishing pressure and climate change. Specifically, how life history traits are changing in response to marine heatwaves and other local climate change effects. This is particularly important for reef-associated nearshore fishes, as they occupy habitats likely to be impacted most by changing ocean conditions.</p>
<p>In partnership with the Sportfishing Association of California (SAC), the NOAA Fisheries Ecology Division (FED) at the Southwest Fisheries Science Center is piloting a # year-long cooperative sampling project to collect biological samples for groundfishes from the for-hire recreational fishing fleet across California. Vessel captains and crew members are trained to measure and retain groundfish samples of specific target species (see Vessel Sampling Protocols for more details). The samples are then labeled, organized, preserved and shipped to NOAA SWFSC and California Collaborative Fisheries Research Program (CCFRP) campuses for further dissections and analysis. The life history information generated from this biological data are incorporated into current federal stock assessment efforts.</p>
<section id="project-objectives" class="level3">
<h3 class="anchored" data-anchor-id="project-objectives"><strong>Project Objectives:</strong></h3>
<ol type="1">
<li><p>Collect information on federally-managed groundfish species in cooperation with the Sportfishing Association of California (SAC) and the California commercial passenger fishing vessel (CPFV) fleet during the recreational fishing season to inform stock assessments and management.</p></li>
<li><p>Charter CPFVs during months when rockfish are spawning for additional biological data on maturity and fecundity.</p></li>
</ol>
</section>
</section>
<section id="cdfw-recreational-groundfish-season-structure" class="level2">
<h2 class="anchored" data-anchor-id="cdfw-recreational-groundfish-season-structure">2023 CDFW Recreational Groundfish Season Structure:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"CDFW-regulation.PNG"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-include-figure" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="CDFW-regulation.PNG" class="img-fluid figure-img" alt="2023 recreational groundfish season structure separated by CDFW management areas" width="900"></p>
<figcaption class="figure-caption">Figure&nbsp;1: 2023 recreational groundfish season structure separated by CDFW management areas</figcaption>
</figure>
</div>
</div>
</div>
<section id="in-season-groundfish-regulation-changes" class="level3">
<h3 class="anchored" data-anchor-id="in-season-groundfish-regulation-changes">2023 In-Season Groundfish Regulation Changes:</h3>
<ul>
<li><p><strong>Effective August 7th, 2023:</strong> Retention of Quillback Rockfish (Sebastes maliger) is prohibited statewide in both the recreational and commercial fisheries - <em>announced July 28th, 2023</em></p></li>
<li><p><strong>Effective August 21st, 2023:</strong> Recreational boat-based groundfish fishing will only be permitted seaward of the 50 fathom Rockfish Conservation Area (RCA) boundary line for the Northern Groundfish Management Area (GMA) - <em>announced August 11th, 2023</em></p></li>
<li><p><strong>Effective September 1st, 2023:</strong> Recreational boat-based groundfish fishing will only be permitted seaward of the 50 fathom Rockfish Conservation Area (RCA) boundary line for the Mendocino Groundfish Management Area (GMA), San Francisco GMA, and Central Coast GMA - <em>announced August 21st, 2023</em></p></li>
</ul>
</section>
</section>
<section id="recruiting-vessels" class="level2">
<h2 class="anchored" data-anchor-id="recruiting-vessels">Recruiting Vessels:</h2>
</section>
<section id="vessel-sampling-protocols" class="level2">
<h2 class="anchored" data-anchor-id="vessel-sampling-protocols">Vessel Sampling Protocols:</h2>
<p>To collect life history information on rockfish species in cooperation with the California CPFV fleet, we have identified several different potential methods that we will explore during the 2023 fishing season.&nbsp; These three methods are all preliminary and the program will adapt based on feedback from the fleet and scientists. Each vessel/landing will receive training and instructions specific to their protocol.</p>
<section id="on-board-sampling-by-vessel-crew-members" class="level3">
<h3 class="anchored" data-anchor-id="on-board-sampling-by-vessel-crew-members"><strong>On-Board Sampling by Vessel Crew Members</strong></h3>
<p>Every 1-2 month period, or as needed, each vessel will receive 25 tags per species for a predetermined suite of groundfish (e.g., rockfish, greenlings, California scorpionfish), along with tags for opportunistic sampling of less commonly encountered species (i.e., BONUS tags). The expectation is to sample 50 fish over the course of one month, and, to the extent possible, distribute the sampling evenly over the 1-month period. The flexibility of having tags for multiple species is needed to ensure collection of adequate sample sizes for assessments. One motivation for providing tags for a suite of species is that vessels fishing in an area where "All Depths" are open may fish farther from port on good weather days and closer to port during sub-optimal conditions, resulting in different species compositions in the catch.</p>
<p>Each sampled fish will be tagged through the lower jaw/operculum with a Tyvek tag that is pre-labelled with the vessel name and species, and will be measured on a provided&nbsp; L-shaped measuring board by a crew member prior to fileting. The crew will measure the fish and record the length and capture date with permanent ink (a "sharpie") on the Tyvek tag. Once the fish has been measured, the crew can filet the fish leaving the stomach cavity intact for later sex and maturity stage determination. The tagged carcass will then be placed in a contractor trash bag and cooler and stored in a freezer prior to being shipped or picked up by NMFS or CCFRP researchers for laboratory processing.</p>
<p>Each vessel will be compensated $300 a month for participation in this cooperative sampling contingent on providing 50 samples per month.</p>
<section id="pax-vessels" class="level4">
<h4 class="anchored" data-anchor-id="pax-vessels"><strong>6-PAX Vessels</strong></h4>
<p>The vessel crew will sample no more than 25 fish per trip. On a given trip, the vessel crew will sample all tagged species kept by anglers on trips until they have reached 25 of each. The vessel crew can fill in with BONUS samples as needed with a maximum of 8 fish per trip.</p>
</section>
<section id="party-boat-vessels" class="level4">
<h4 class="anchored" data-anchor-id="party-boat-vessels"><strong>Party Boat Vessels</strong></h4>
<p><strong>Option A (sample up to 50 fish per trip):</strong> The vessel crew will sample no more than 50 fish from a single trip per month, and may sample multiple trips if needed to reach 50 fish for the month. On a given trip, the vessel crew will pick two species to sample from the species tags. For one species, the vessel crew will sample 1-2 fish from all odd numbered angler bags (1,3,5, etc.) until they reach 25. The vessel crew will sample 1-2 fish of the second species from all even numbered angler bags (2,4,6, etc.) until they reach 25. The 1-2 fish of the same species will be selected randomly from the bag.</p>
<p><strong>Option B (sample up to 50 fish per trip):</strong> The vessel crew will sample at least 25 fish on two trips per month. On the first trip, the vessel crew will pick one of the two species to sample from the assigned species tags. The vessel crew will randomly sample 1-2 individuals from all odd numbered angler bags (1,3,5, etc.) until they reach 25. On the second trip, the crew will follow the same procedure for the second species.</p>
<p><strong>Option C (sample whole bags):</strong> The vessel</p>
</section>
</section>
<section id="on-board-sampling-by-nmfsccfrp-researcher" class="level3">
<h3 class="anchored" data-anchor-id="on-board-sampling-by-nmfsccfrp-researcher"><strong>On-Board Sampling by NMFS/CCFRP Researcher</strong></h3>
<p>One to three times per month, a NMFS or CCFRP researcher will coordinate with the vessel to ride along on a fishing charter to sample the catch from the trip. The sampler will identify 5-7 anglers to have their bags sampled prior to having their fish fileted. The NMFS or CCFRP sampler will sample a subset of species using the following procedures: (1) the sampler will measure and tag two randomly selected vermilion rockfish from each bag; (2) the sampler will measure and tag all other species in the bag except chilipepper rockfish, widow rockfish and bocaccio rockfish. In addition to the 5 bags, the sampler will opportunistically measure and tag priority species (i.e., copper rockfish, quillback rockfish) or less commonly encountered species (e.g., tiger rockfish, flag rockfish) onboard.&nbsp;</p>
<p>Each sampled fish will be tagged through the lower jaw/operculum with a Tyvek tag that is pre-labelled with the vessel name and species, and will be measured on an L-shaped measuring board by the NMFS or CCFRP sampler.&nbsp; The tag will indicate to the crew that the fish was selected for sampling. The NMFS or CCFRP sampler will measure the fish and record the length and capture date with a sharpie on the Tyvek tag. Once the fish has been measured by the NMFS or CCFRP sampler, the crew can filet the fish leaving the stomach cavity intact for later sex and maturity stage determination. The carcass will be handed off to the NMFS or CCFRP sampler for immediate processing either at the dock or back at the laboratory facility.&nbsp;&nbsp;</p>
<p>This sampling may occur in tandem with an onboard observer trip conducted by Cal Poly SLO, and in other locations, if the captains agree, similar onboard observer data will be collected during a ride-along.&nbsp; All information that the vessel considers proprietary or confidential will remain confidential. Each vessel will be compensated $300 each month for participation in this cooperative sampling.</p>
</section>
<section id="dockside-sampling-by-nmfsccfrp-researcher" class="level3">
<h3 class="anchored" data-anchor-id="dockside-sampling-by-nmfsccfrp-researcher"><strong>Dockside Sampling by NMFS/CCFRP Researcher</strong></h3>
<p>One to three times a month, a NMFS or CCFRP researcher will coordinate with the vessel operator to sample the catch from the trip once the vessel returns to the fishing dock. At the start of the trip the vessel crew will identify 5 customers willing to have their bags sampled back at the dock prior to having their fish fileted.&nbsp; The NMFS or CCFRP sampler will meet the vessel at the dock and sample a subset of species using the following procedures: (1) the sampler will sample only two randomly selected vermilion rockfish from each bag; (2) the sampler will sample all other species in the bag except bank rockfish, chilipepper rockfish, widow rockfish and bocaccio rockfish.&nbsp;</p>
<p>Each sampled fish will be tagged through the lower jaw/operculum with a Tyvek tag that is pre-labelled with the vessel name and species, and will be measured on an L-shaped measuring board by the NMFS or CCFRP sampler prior to fileting. To measure the fish, the NMFS or CCFRP sampler will position the fish flat on the measuring board with the mouth closed and pressed up against the tip of the board at the zero line with the caudal fin splayed out and not pinched. The NMFS or CCFRP sampler will measure the fish to the nearest millimeter at the center of the caudal fin and record the length and capture date with a sharpie on the Tyvek tag. Once the fish has been measured by the NMFS or CCFRP sampler, the crew can filet the fish leaving the stomach cavity intact for later sex and maturity stage determination. The carcass will be handed off to the NMFS or CCFRP sampler for processing either at the dock or back at the laboratory facility.</p>
<p>Each vessel will be compensated $300 each month for participation in this cooperative sampling.</p>
</section>
</section>
<section id="supplies" class="level2">
<h2 class="anchored" data-anchor-id="supplies">Supplies:</h2>
</section>
<section id="tracking-vessel-tags" class="level2">
<h2 class="anchored" data-anchor-id="tracking-vessel-tags">Tracking Vessel Tags:</h2>
</section>
<section id="tracking-vessel-samples" class="level2">
<h2 class="anchored" data-anchor-id="tracking-vessel-samples">Tracking Vessel Samples:</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>